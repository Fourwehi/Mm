# WITH 제품 요구사항 정의서 (Phase 분리본)

---

## 1. 서비스 비전

WITH은 취미 클래스를 **지역·카테고리 기반으로 탐색**하고,

로그인 후 **타임테이블에서 회차를 선택해 예약 정보를 저장**할 수 있는 취미 클래스 예약 서비스다.

Phase 1에서는

“클래스 탐색 → 예약 데이터 저장”의 **기본 흐름이 실제로 동작하는지**를 검증한다.

Phase 2에서는

운영을 고려한 **관리자 기능, 승인 프로세스, 후기 시스템**을 추가하여

서비스를 확장 가능한 구조로 고도화한다.

---

## 2. 상세 기능 명세 (Phase 분리)

---

### Phase 1: MVP (3일 수업 내 구현 범위)

### 2.1 인증 및 접근 정책

- Google Social Login
- 비로그인 사용자
    - 클래스 목록 조회
    - 지역/카테고리 필터링
    - 클래스 상세 조회
- 로그인 사용자
    - 타임테이블 조회
    - 예약 데이터 생성
    - 내 예약 조회

> 목적: 인증은 “표준화된 방식으로 최소 구현”
> 

---

### 2.2 클래스 탐색 (Discovery)

- 메인 페이지 클래스 목록 조회
- 필터
    - 지역 필터
    - 카테고리 필터
- 정렬
    - 최신 등록순 단일 정렬

> 복잡한 정렬/추천 로직은 제외
> 

---

### 2.3 클래스 상세

- 클래스 정보
    - 클래스명
    - 카테고리
    - 설명
    - 가격
    - 소요 시간
- 스튜디오 정보
    - 가게명
    - 위치
    - 소개글
- 예약 CTA 버튼
    - 비로그인 상태에서도 노출
    - 클릭 시 로그인 유도

---

### 2.4 타임테이블 기반 예약 (데이터 저장 중심)

- 회차(타임테이블) 조회
    - 날짜
    - 시작 시간
    - 정원
    - 예약 인원
- 인원 수 선택
- 예약 생성
    - 예약 상태: **CONFIRMED**
    - 즉시 확정 방식만 사용

> Phase 1에서는
> 
> 
> “예약이 실제로 확정되는가”가 아니라
> 
> “예약 데이터가 정상적으로 쌓이는가”만 검증
> 

---

### 2.5 내 예약

- 로그인 사용자의 예약 목록 조회
- 예약 상세
    - 일정
    - 인원
    - 예약 상태(CONFIRMED)

---

### 2.6 AI 기능 (최소 사용)

- 단순 텍스트 입력 → AI 응답
    - 예: 클래스 설명 요약
- AI 응답 결과를 DB에 저장
- 실시간 추천/자동 판단 없음

> 목적:
> 
> 
> AI 연동 파이프라인 + 결과 저장 구조 검증
> 

---

### 2.7 UI/UX (Phase 1 기준)

- 메인
    - 필터 영역 + 카드 리스트
- 클래스 상세
    - 정보 + 예약 버튼
- 타임테이블
    - 리스트 + 인원 선택
- 내 예약
    - 단순 리스트

---

### Phase 2: 고도화 (수업 이후 개별 진행)

---

### 2.8 예약 승인 프로세스

- 스튜디오별 예약 방식 선택
    - 즉시 확정(INSTANT)
    - 관리자 승인(APPROVAL)
- 예약 상태 확장
    - PENDING
    - APPROVED
    - CANCELLED
- 승인/거절 UI 제공

---

### 2.9 후기 시스템

- 후기 조회
- 후기 작성
    - 조건: 예약 완료 또는 승인 완료 사용자
- 클래스 단위 후기 노출
- 평점 필드 추가

---

### 2.10 관리자 기능

- 스튜디오 관리
- 클래스 등록/수정
- 회차 생성/수정/삭제
- 예약 관리
    - 상태별 조회
    - 승인/거절/취소

---

### 2.11 정렬 및 사용자 편의 기능

- 요즘 뜨는 클래스
    - 예약 수/조회 수 기반
- 관심 클래스(찜하기)
- 평점 기반 정렬

---

### 2.12 결제 및 예약금

- 전액 결제 / 예약금 결제
- 결제 상태 관리
    - 성공 / 실패 / 환불
- 예약 상태와 결제 상태 분리
- 결제 실패 시
    - 예약 만료 처리
    - 좌석 복구

---

### 2.13 AI 기능 고도화

- 취향/예약 히스토리 기반 추천
- 추천 이유 자연어 설명
- 예약 가능 시간 자동 안내

> Phase 2 AI는
> 
> 
> “편의 기능”이지 핵심 흐름에 영향 주지 않음
> 

---

## 3. 데이터 모델링 (설명 중심)

### Users

- 서비스에 로그인한 사용자를 식별하기 위한 테이블이다.
- 예약, 후기, 찜 등 모든 사용자 활동의 기준 엔티티로 사용된다.

### Studios

- 클래스를 운영하는 가게(스튜디오) 단위를 표현한다.
- 위치, 소개글, 예약 승인 방식 등 운영 정책을 관리한다.

### Classes

- 스튜디오에서 제공하는 취미 클래스 정보를 저장한다.
- 클래스명, 카테고리, 설명, 가격, 소요 시간 등 정적 정보를 포함한다.

### Sessions (회차)

- **“이 클래스가 언제 열리는가”를 표현하는 단위**이다.
- 실제 예약은 클래스가 아니라 **회차(Session)에 대해 발생**한다.
- 정원, 예약 인원, 잔여 좌석 계산에 사용된다.

### Reservations

- 사용자와 회차를 연결하는 예약 기록이다.
- 예약 인원과 예약 상태를 관리하며, Phase에 따라 상태가 확장된다.
    - Phase 1: CONFIRMED
    - Phase 2: PENDING / APPROVED / CANCELLED
    - Phase 3: 결제 상태와 연동

### Reviews

- 클래스에 대한 사용자 후기를 저장한다.
- 예약 완료 사용자만 작성 가능하며, 클래스 신뢰도 판단에 사용된다.

### Payments

- 예약과 연결된 결제 정보를 관리하는 테이블이다.
- 전액 결제/예약금 결제, 결제 성공·실패·환불 상태를 저장한다.

**데이터 정합성 원칙**

- 예약 생성 시 DB 트랜잭션을 사용한다.
- 회차 정원을 초과하는 예약은 허용하지 않는다.

---

## 4. UI/UX 구조 (Phase 기준)

### Phase 1

- 탐색 → 상세 → 예약 → 내 예약

### Phase 2

- 관리자 전용 화면 추가
- 상태 기반 UI(승인/거절)
- 결제 플로우 UI
- 고급 필터 및 정렬 UI

---

## 5. AI 연동 시나리오 (Phase 분리)

### Phase 1

- 텍스트 입력 → AI 응답 → DB 저장
- UI에 단순 출력

### Phase 2

- 추천 로직
- 시간/취향 기반 안내
- 자연어 설명 강화

## 3. 데이터 모델링 (설명 중심)

### Users

- 서비스에 로그인한 사용자를 식별하기 위한 테이블이다.
- 예약, 후기, 찜 등 모든 사용자 활동의 기준 엔티티로 사용된다.

### Studios

- 클래스를 운영하는 가게(스튜디오) 단위를 표현한다.
- 위치, 소개글, 예약 승인 방식 등 운영 정책을 관리한다.

### Classes

- 스튜디오에서 제공하는 취미 클래스 정보를 저장한다.
- 클래스명, 카테고리, 설명, 가격, 소요 시간 등 정적 정보를 포함한다.

### Sessions (회차)

- **“이 클래스가 언제 열리는가”를 표현하는 단위**이다.
- 실제 예약은 클래스가 아니라 **회차(Session)에 대해 발생**한다.
- 정원, 예약 인원, 잔여 좌석 계산에 사용된다.

### Reservations

- 사용자와 회차를 연결하는 예약 기록이다.
- 예약 인원과 예약 상태를 관리하며, Phase에 따라 상태가 확장된다.
    - Phase 1: CONFIRMED
    - Phase 2: PENDING / APPROVED / CANCELLED
    - Phase 3: 결제 상태와 연동

### Reviews

- 클래스에 대한 사용자 후기를 저장한다.
- 예약 완료 사용자만 작성 가능하며, 클래스 신뢰도 판단에 사용된다.

### Payments

- 예약과 연결된 결제 정보를 관리하는 테이블이다.
- 전액 결제/예약금 결제, 결제 성공·실패·환불 상태를 저장한다.

**데이터 정합성 원칙**

- 예약 생성 시 DB 트랜잭션을 사용한다.
- 회차 정원을 초과하는 예약은 허용하지 않는다.